<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VHS Glitch</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      padding: 0;
      font-family: 'Press Start 2P', monospace;
      background-color: black;
      color: lightgrey;
      overflow: hidden;
      background-image: url("https://68.media.tumblr.com/595a5fa01fe53ca0e4ca8f37bacc849d/tumblr_nve67mJtue1tanofjo1_500.gif");
      background-size: cover;
      text-shadow: black 2px 2px 1px, black -2px 2px 1px,
                   black -2px -2px 1px, black 2px -2px 1px,
                   black 0px 2px 1px, black 0px -2px 1px,
                   black 2px 0px 1px, black -2px 0px 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .glitch-container {
      position: relative;
      width: 150px;
      height: 150px;
      filter: contrast(1.2) brightness(1.1);
    }

    .glitch-rgb {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("imagens/Iluminati.png");
      background-size: cover;
      mix-blend-mode: screen;
      animation: rgbShift 0.2s infinite;
      opacity: 0.3;
    }

    .scanlines {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    @keyframes rgbShift {
      0% { transform: translate(0, 0); filter: hue-rotate(0deg); }
      50% { transform: translate(2px, -2px); filter: hue-rotate(30deg); }
      100% { transform: translate(-2px, 2px); filter: hue-rotate(-30deg); }
    }

    /* Responsividade */
    @media (max-width: 600px) {
      .glitch-container {
        width: 100px;
        height: 100px;
      }
    }
  </style>
</head>
<body onclick="changeBackground();">
  <video id="bgVideo" class="bg-video" autoplay muted loop>
    <source src="./videos/inicio1.gif" type="video/gif">
  </video>

  <div class="glitch-container">
    <div class="glitch-rgb"></div>
    <div class="scanlines"></div>
  </div>

  <!-- Elementos de Ãudio -->
  <audio id="sfx-navegar" src="audios/navegar.mp3"></audio>
  <audio id="sfx-selecionar" src="audios/selecionar.mp3"></audio>
  <audio id="menu-appear-sfx" src="audios/menu_aparecer.mp3"></audio>
  <audio id="bg-audio-1" src="audios/bg1.mp3" loop></audio>
  <audio id="bg-audio-2" src="audios/bg2.mp3" loop></audio>
  <audio id="sfx-enter" src="audios/enter.mp3"></audio>

  <script>
    const menuItems = document.querySelectorAll('.menu-item');
    const bgVideo = document.getElementById('bgVideo');
    const menuContainer = document.querySelector('.menu-container');
    const sfxNavegar = document.getElementById('sfx-navegar');
    const sfxSelecionar = document.getElementById('sfx-selecionar');
    const sfxMenuAppear = document.getElementById('menu-appear-sfx');
    const bgAudio1 = document.getElementById('bg-audio-1');
    const bgAudio2 = document.getElementById('bg-audio-2');
    const sfxEnter = document.getElementById('sfx-enter'); 
    let selectedIndex = 0;
    let hasChanged = false;

    function updateSelection() {
        menuItems.forEach((item, index) => {
            if (!item.classList.contains('fixed-selected')) {
                item.classList.toggle('selected', index === selectedIndex);
            }
        });
    }

    function changeBackground() {
        if (hasChanged) return;
        hasChanged = true;
        const newSource = document.createElement('source');
        newSource.src = 'videos/inicio2.gif';
        newSource.type = 'video/mp4';
        bgVideo.innerHTML = '';
        bgVideo.appendChild(newSource);
        bgVideo.loop = false;
        bgVideo.load();
        bgVideo.play();
        if (menuContainer) {
          menuContainer.classList.add('visible');
        }
        if (sfxMenuAppear) {
          sfxMenuAppear.currentTime = 0;
          sfxMenuAppear.play();
        }
        if (bgAudio1) {
          bgAudio1.pause();
        }
        if (bgAudio2) {
          bgAudio2.currentTime = 0;
          bgAudio2.play();
        }
    }

    document.body.addEventListener('click', changeBackground);

    document.addEventListener('keydown', (e) => {
        if (!hasChanged) return;
        let prevIndex = selectedIndex;
        if (e.key === 'ArrowDown') {
            selectedIndex = (selectedIndex + 1) % menuItems.length;
        } else if (e.key === 'ArrowUp') {
            selectedIndex = (selectedIndex - 1 + menuItems.length) % menuItems.length;
        } else if (e.key === 'Enter') {
            if (sfxEnter) {
              sfxEnter.currentTime = 0;
              sfxEnter.play();
            }
            const selectedItem = menuItems[selectedIndex].textContent.trim().toLowerCase().replace(/ /g, '');
            if (!selectedItem) return;
            if (sfxSelecionar) {
              sfxSelecionar.currentTime = 0;
              sfxSelecionar.play();
            }
            setTimeout(() => {
                window.location.href = `${selectedItem}.html`;
            }, 300);
        }
        if (prevIndex !== selectedIndex) {
            updateSelection();
            if (sfxNavegar) {
              sfxNavegar.currentTime = 0;
              sfxNavegar.play();
            }
        }
    });

    updateSelection();

    window.addEventListener('DOMContentLoaded', () => {
        if (bgAudio1) {
          bgAudio1.volume = 0.2;
          bgAudio1.play().catch((error) => {
              console.warn('Autoplay bloqueado. Tente clicar na tela para ativar o som.');
          });
        }
        if (bgAudio2) {
          bgAudio2.volume = 0.1;
        }
        if (sfxNavegar) {
          sfxNavegar.volume = 0.2;
        }
        if (sfxEnter) {
          sfxEnter.volume = 0.2;
        }
    });

    function startAudio() {
        if (bgAudio1) {
          bgAudio1.play().catch((err) => {
              console.warn("Autoplay bloqueado:", err);
          });
        }
        document.removeEventListener('click', startAudio);
        document.removeEventListener('keydown', startAudio);
    }
    document.addEventListener('click', startAudio);
    document.addEventListener('keydown', startAudio);
  </script>
</body>
</html>
